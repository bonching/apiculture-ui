import { Farm, Alert, Beehive, Sensor } from "../types";

// Generate mock history data
const generateHistory = (baseValue: number, variance: number, points: number = 24) => {
  return Array.from({ length: points }, (_, i) => ({
    time: `${23 - i}h`,
    value: Math.round((baseValue + (Math.random() - 0.5) * variance) * 10) / 10,
  })).reverse();
};

// Mock Sensors with multi-metric support
export const mockSensors: Sensor[] = [
  // Alpha Hive sensors (hive-1-1)
  {
    id: "sensor-1",
    name: "Bosch BME680 Env Sensor",
    dataCapture: ["temperature", "humidity", "co2", "voc"],
    status: "online",
    currentValue: "34.5°C, 58%, 420ppm, 2.1kΩ",
    beehiveId: "hive-1-1",
    hiveLocation: "brood",
    systems: ["data_collection"],
    lastUpdated: "2 min ago",
  },
  {
    id: "sensor-2",
    name: "MEMS Acoustic Monitor",
    dataCapture: ["sound", "vibration"],
    status: "online",
    currentValue: "68dB, 0.3mm/s",
    beehiveId: "hive-1-1",
    hiveLocation: "brood",
    systems: ["data_collection", "defense"],
    lastUpdated: "3 min ago",
  },
  {
    id: "sensor-3",
    name: "OpenCV AI Bee Counter",
    dataCapture: ["bee_count"],
    status: "online",
    currentValue: 45000,
    beehiveId: "hive-1-1",
    hiveLocation: "brood",
    systems: ["data_collection"],
    lastUpdated: "5 min ago",
  },
  {
    id: "sensor-4",
    name: "TSL2591 Light & UV Sensor",
    dataCapture: ["lux", "uv_index"],
    status: "online",
    currentValue: "1200lux, UV4",
    beehiveId: "hive-1-1",
    hiveLocation: "external",
    systems: ["data_collection"],
    lastUpdated: "1 min ago",
  },
  {
    id: "sensor-5",
    name: "TGS2600 Chemical Sensor",
    dataCapture: ["pheromone", "odor_compounds"],
    status: "online",
    currentValue: "High",
    beehiveId: "hive-1-1",
    hiveLocation: "brood",
    systems: ["data_collection", "defense"],
    lastUpdated: "6 min ago",
  },
  // Beta Hive sensors (hive-1-2)
  {
    id: "sensor-6",
    name: "Bosch BME280 Env Sensor",
    dataCapture: ["temperature", "humidity", "co2"],
    status: "online",
    currentValue: "33.8°C, 62%, 410ppm",
    beehiveId: "hive-1-2",
    hiveLocation: "honey_super",
    systems: ["data_collection"],
    lastUpdated: "4 min ago",
  },
  {
    id: "sensor-7",
    name: "IR Beam Bee Counter",
    dataCapture: ["bee_count"],
    status: "online",
    currentValue: 42000,
    beehiveId: "hive-1-2",
    hiveLocation: "honey_super",
    systems: ["data_collection"],
    lastUpdated: "7 min ago",
  },
  {
    id: "sensor-8",
    name: "Davis Vantage Weather Station",
    dataCapture: ["rainfall", "wind_speed", "barometric_pressure"],
    status: "online",
    currentValue: "0mm, 5km/h, 1013hPa",
    beehiveId: "hive-1-2",
    hiveLocation: "external",
    systems: ["data_collection"],
    lastUpdated: "10 min ago",
  },
  // Gamma Hive sensors (hive-1-3)
  {
    id: "sensor-9",
    name: "DHT22 Temp/Humidity Sensor",
    dataCapture: ["temperature", "humidity"],
    status: "online",
    currentValue: "35.2°C, 55%",
    beehiveId: "hive-1-3",
    hiveLocation: "external",
    systems: ["data_collection"],
    lastUpdated: "2 min ago",
  },
  {
    id: "sensor-10",
    name: "Raspberry Pi Bee Counter",
    dataCapture: ["bee_count"],
    status: "offline",
    currentValue: 38000,
    beehiveId: "hive-1-3",
    hiveLocation: "external",
    systems: ["data_collection"],
    lastUpdated: "2 hours ago",
  },
  {
    id: "sensor-11",
    name: "Arducam 8MP Camera Module",
    dataCapture: ["image"],
    status: "online",
    currentValue: "Active",
    beehiveId: "hive-1-3",
    hiveLocation: "external",
    systems: ["data_collection"],
    lastUpdated: "15 min ago",
  },
  // Delta Hive sensors (hive-2-1)
  {
    id: "sensor-12",
    name: "Sensirion SHT85 Env Monitor",
    dataCapture: ["temperature", "humidity", "co2", "voc"],
    status: "online",
    currentValue: "35.1°C, 60%, 430ppm, 2.3kΩ",
    beehiveId: "hive-2-1",
    hiveLocation: "brood",
    systems: ["data_collection"],
    lastUpdated: "3 min ago",
  },
  {
    id: "sensor-13",
    name: "AI Vision Bee Counter Pro",
    dataCapture: ["bee_count"],
    status: "online",
    currentValue: 48000,
    beehiveId: "hive-2-1",
    hiveLocation: "brood",
    systems: ["data_collection"],
    lastUpdated: "5 min ago",
  },
  {
    id: "sensor-14",
    name: "Alphasense OPC-N3 Pollen Monitor",
    dataCapture: ["pollen_concentration"],
    status: "online",
    currentValue: "Medium",
    beehiveId: "hive-2-1",
    hiveLocation: "external",
    systems: ["data_collection"],
    lastUpdated: "20 min ago",
  },
  // Epsilon Hive sensors (hive-2-2) - some offline
  {
    id: "sensor-15",
    name: "AM2302 Temp/Humidity Sensor",
    dataCapture: ["temperature", "humidity"],
    status: "offline",
    currentValue: "36.5°C, 65%",
    beehiveId: "hive-2-2",
    hiveLocation: "honey_super",
    systems: ["data_collection"],
    lastUpdated: "3 hours ago",
  },
  {
    id: "sensor-16",
    name: "Infrared Bee Counter v2",
    dataCapture: ["bee_count"],
    status: "offline",
    currentValue: 40000,
    beehiveId: "hive-2-2",
    hiveLocation: "honey_super",
    systems: ["data_collection"],
    lastUpdated: "3 hours ago",
  },
  // Zeta Hive sensors (hive-3-1)
  {
    id: "sensor-17",
    name: "SenseAir K30 CO2 Sensor",
    dataCapture: ["temperature", "humidity", "co2"],
    status: "online",
    currentValue: "34.2°C, 59%, 415ppm",
    beehiveId: "hive-3-1",
    hiveLocation: "brood",
    systems: ["data_collection"],
    lastUpdated: "4 min ago",
  },
  {
    id: "sensor-18",
    name: "TensorFlow Bee Counter",
    dataCapture: ["bee_count"],
    status: "online",
    currentValue: 52000,
    beehiveId: "hive-3-1",
    hiveLocation: "brood",
    systems: ["data_collection"],
    lastUpdated: "4 min ago",
  },
  {
    id: "sensor-19",
    name: "AS7341 Multi-Spectrum Analyzer",
    dataCapture: ["lux", "uv_index", "vibration"],
    status: "online",
    currentValue: "1100lux, UV3, 0.2mm/s",
    beehiveId: "hive-3-1",
    hiveLocation: "external",
    systems: ["data_collection", "defense"],
    lastUpdated: "8 min ago",
  },
  // Harvesting System Sensors (not linked to beehives)
  {
    id: "sensor-20",
    name: "LoadCell HX711 Scale Sensor",
    dataCapture: ["activity", "image"],
    status: "online",
    currentValue: "Medium",
    beehiveId: null,
    hiveLocation: "external",
    systems: ["harvesting"],
    lastUpdated: "5 min ago",
  },
  {
    id: "sensor-21",
    name: "Harvest Readiness Monitor Pro",
    dataCapture: ["activity"],
    status: "online",
    currentValue: "High",
    beehiveId: null,
    hiveLocation: "external",
    systems: ["harvesting"],
    lastUpdated: "3 min ago",
  },
  {
    id: "sensor-22",
    name: "Digital Honey Scale HX711",
    dataCapture: ["honey_harvested"],
    status: "online",
    currentValue: "15500g",
    beehiveId: 'hive-1-1',
    hiveLocation: "honey_super",
    systems: ["harvesting"],
    lastUpdated: "10 min ago",
  },
  // Unmapped sensors
  {
    id: "sensor-23",
    name: "Si7021 Humidity Sensor",
    dataCapture: ["temperature", "humidity"],
    status: "online",
    currentValue: "25°C, 45%",
    beehiveId: null,
    systems: ["data_collection"],
    lastUpdated: "12 min ago",
  },
  {
    id: "sensor-24",
    name: "Backup Weather Station",
    dataCapture: ["rainfall", "wind_speed", "barometric_pressure", "uv_index"],
    status: "offline",
    currentValue: "N/A",
    beehiveId: null,
    systems: ["data_collection"],
    lastUpdated: "5 hours ago",
  },
];

// Mock Beehives
export const mockBeehives: Beehive[] = [
  {
    id: "hive-1-1",
    name: "Alpha Hive",
    description: "Main production hive with full monitoring",
    location: "North sector, Row 1, Position 1",
    farmId: "farm-1",
    harvestStatus: "excellent",
    honeyProduction: 45,
    sensorIds: ["sensor-1", "sensor-2", "sensor-3", "sensor-4", "sensor-5"],
    hasAlert: false,
    temperatureHistory: generateHistory(34.5, 2),
    humidityHistory: generateHistory(58, 5),
    beeCountHistory: generateHistory(45000, 2000),
    co2History: generateHistory(420, 30),
    soundHistory: generateHistory(68, 5),
    activityHistory: generateHistory(75, 10),
    vocHistory: generateHistory(2.1, 0.3),
    vibrationHistory: generateHistory(0.3, 0.1),
    luxHistory: generateHistory(1200, 200),
    pheromoneHistory: generateHistory(85, 10),
    uvIndexHistory: generateHistory(4, 1),
    rainfallHistory: generateHistory(0, 0.5),
    windSpeedHistory: generateHistory(5, 2),
    barometricPressureHistory: generateHistory(1013, 5),
    pollenConcentrationHistory: generateHistory(65, 15),
  },
  {
    id: "hive-1-2",
    name: "Beta Hive",
    description: "Secondary hive with weather monitoring",
    location: "North sector, Row 1, Position 2",
    farmId: "farm-1",
    harvestStatus: "good",
    honeyProduction: 38,
    sensorIds: ["sensor-6", "sensor-7", "sensor-8"],
    hasAlert: false,
    temperatureHistory: generateHistory(33.8, 2),
    humidityHistory: generateHistory(62, 5),
    beeCountHistory: generateHistory(42000, 1800),
    co2History: generateHistory(410, 25),
    soundHistory: generateHistory(65, 4),
    activityHistory: generateHistory(70, 8),
    vocHistory: generateHistory(1.8, 0.2),
    vibrationHistory: generateHistory(0.25, 0.08),
    luxHistory: generateHistory(1100, 150),
    pheromoneHistory: generateHistory(78, 8),
    uvIndexHistory: generateHistory(3.5, 0.8),
    rainfallHistory: generateHistory(0, 0.3),
    windSpeedHistory: generateHistory(5, 1.5),
    barometricPressureHistory: generateHistory(1013, 4),
    pollenConcentrationHistory: generateHistory(60, 12),
  },
  {
    id: "hive-1-3",
    name: "Gamma Hive",
    description: "Observation hive with image capture",
    location: "South sector, Row 2, Position 3",
    farmId: "farm-1",
    harvestStatus: "fair",
    honeyProduction: 32,
    sensorIds: ["sensor-9", "sensor-10", "sensor-11"],
    hasAlert: true,
    temperatureHistory: generateHistory(35.2, 3),
    humidityHistory: generateHistory(55, 6),
    beeCountHistory: generateHistory(38000, 2200),
    co2History: generateHistory(450, 35),
    soundHistory: generateHistory(72, 6),
    activityHistory: generateHistory(65, 12),
    vocHistory: generateHistory(2.3, 0.4),
    vibrationHistory: generateHistory(0.35, 0.12),
    luxHistory: generateHistory(1000, 180),
    pheromoneHistory: generateHistory(72, 12),
    uvIndexHistory: generateHistory(3, 1),
    rainfallHistory: generateHistory(0, 0.4),
    windSpeedHistory: generateHistory(6, 2),
    barometricPressureHistory: generateHistory(1010, 6),
    pollenConcentrationHistory: generateHistory(55, 10),
  },
  {
    id: "hive-2-1",
    name: "Delta Hive",
    description: "High-production hive with pollen monitoring",
    location: "East sector, Row 1, Position 1",
    farmId: "farm-2",
    harvestStatus: "excellent",
    honeyProduction: 52,
    sensorIds: ["sensor-12", "sensor-13", "sensor-14"],
    hasAlert: false,
    temperatureHistory: generateHistory(35.1, 2),
    humidityHistory: generateHistory(60, 4),
    beeCountHistory: generateHistory(48000, 2500),
    co2History: generateHistory(430, 28),
    soundHistory: generateHistory(70, 5),
    activityHistory: generateHistory(80, 9),
    vocHistory: generateHistory(2.3, 0.25),
    vibrationHistory: generateHistory(0.28, 0.09),
    luxHistory: generateHistory(1250, 190),
    pheromoneHistory: generateHistory(88, 9),
    uvIndexHistory: generateHistory(4.2, 0.9),
    rainfallHistory: generateHistory(0, 0.35),
    windSpeedHistory: generateHistory(4.5, 1.8),
    barometricPressureHistory: generateHistory(1014, 4.5),
    pollenConcentrationHistory: generateHistory(70, 13),
  },
  {
    id: "hive-2-2",
    name: "Epsilon Hive",
    description: "Maintenance required - sensors offline",
    location: "West sector, Row 3, Position 2",
    farmId: "farm-2",
    harvestStatus: "poor",
    honeyProduction: 18,
    sensorIds: ["sensor-15", "sensor-16"],
    hasAlert: true,
    temperatureHistory: generateHistory(36.5, 4),
    humidityHistory: generateHistory(65, 7),
    beeCountHistory: generateHistory(40000, 3000),
    co2History: generateHistory(480, 40),
    soundHistory: generateHistory(75, 7),
    activityHistory: generateHistory(55, 15),
    vocHistory: generateHistory(2.6, 0.5),
    vibrationHistory: generateHistory(0.4, 0.15),
    luxHistory: generateHistory(950, 160),
    pheromoneHistory: generateHistory(60, 15),
    uvIndexHistory: generateHistory(3.2, 1.2),
    rainfallHistory: generateHistory(0, 0.6),
    windSpeedHistory: generateHistory(7, 2.5),
    barometricPressureHistory: generateHistory(1008, 7),
    pollenConcentrationHistory: generateHistory(45, 14),
  },
  {
    id: "hive-3-1",
    name: "Zeta Hive",
    description: "Advanced monitoring with multi-spectrum analysis",
    location: "Central sector, Row 1, Position 1",
    farmId: "farm-3",
    harvestStatus: "good",
    honeyProduction: 41,
    sensorIds: ["sensor-17", "sensor-18", "sensor-19"],
    hasAlert: false,
    temperatureHistory: generateHistory(34.2, 2),
    humidityHistory: generateHistory(59, 5),
    beeCountHistory: generateHistory(52000, 2800),
    co2History: generateHistory(415, 26),
    soundHistory: generateHistory(67, 4.5),
    activityHistory: generateHistory(72, 8.5),
    vocHistory: generateHistory(2.0, 0.22),
    vibrationHistory: generateHistory(0.2, 0.07),
    luxHistory: generateHistory(1100, 170),
    pheromoneHistory: generateHistory(82, 9.5),
    uvIndexHistory: generateHistory(3.8, 0.85),
    rainfallHistory: generateHistory(0, 0.32),
    windSpeedHistory: generateHistory(5.2, 1.6),
    barometricPressureHistory: generateHistory(1012, 4.2),
    pollenConcentrationHistory: generateHistory(68, 11),
  },
];

// Mock Farms
export const mockFarms: Farm[] = [
  {
    id: "farm-1",
    name: "Ising Farm",
    description: "Main production farm with advanced monitoring systems",
    address: "Calangcawan Sur, Vinzons, Camarines Norte",
    beehiveIds: ["hive-1-1", "hive-1-2", "hive-1-3"],
  },
  {
    id: "farm-2",
    name: "Alveare Farm",
    description: "Organic certified farm specializing in quality honey production",
    address: "Calangcawan Sur, Vinzons, Camarines Norte",
    beehiveIds: ["hive-2-1", "hive-2-2"],
  },
  {
    id: "farm-3",
    name: "BoJayHan Farm",
    description: "Research and development apiary with experimental hives",
    address: "Iberica, Labo, Camarines Norte",
    beehiveIds: ["hive-3-1"],
  },
];

// Mock Alerts with varied timestamps for proper sorting
const now = Date.now();
export const mockAlerts: Alert[] = [
  {
    id: "alert-1",
    severity: "critical",
    title: "Sensor Non-Responsive",
    message: "Bee Counter Gamma-1 has been offline for 2 hours",
    beehiveName: "Gamma Hive",
    farmName: "Ising Farm",
    timestamp: "2 hours ago",
    timestampMs: now - 2 * 60 * 60 * 1000, // 2 hours ago
    read: false
  },
  {
    id: "alert-2",
    severity: "critical",
    title: "Multiple Sensors Offline",
    message: "All sensors in Epsilon Hive are non-responsive",
    beehiveName: "Epsilon Hive",
    farmName: "Alveare Farm",
    timestamp: "3 hours ago",
    timestampMs: now - 3 * 60 * 60 * 1000, // 3 hours ago
    read: false
  },
  {
    id: "alert-3",
    severity: "warning",
    title: "High Temperature Detected",
    message: "Temperature exceeds normal range (35.2°C)",
    beehiveName: "Gamma Hive",
    farmName: "Ising Farm",
    timestamp: "45 minutes ago",
    timestampMs: now - 45 * 60 * 1000, // 45 minutes ago
    read: false
  },
  {
    id: "alert-4",
    severity: "warning",
    title: "Elevated VOC Levels",
    message: "Volatile organic compounds above threshold",
    beehiveName: "Delta Hive",
    farmName: "Alveare Farm",
    timestamp: "1 hour ago",
    timestampMs: now - 1 * 60 * 60 * 1000, // 1 hour ago
    read: false
  },
  {
    id: "alert-5",
    severity: "info",
    title: "Honey Production Milestone",
    message: "Delta Hive reached 50kg production",
    beehiveName: "Delta Hive",
    farmName: "Alveare Farm",
    timestamp: "30 minutes ago",
    timestampMs: now - 30 * 60 * 1000, // 30 minutes ago
    read: false
  },
  {
    id: "alert-6",
    severity: "warning",
    title: "Low Pheromone Activity",
    message: "Pheromone concentration below optimal levels",
    beehiveName: "Alpha Hive",
    farmName: "Ising Farm",
    timestamp: "15 minutes ago",
    timestampMs: now - 15 * 60 * 1000, // 15 minutes ago
    read: false
  },
  {
    id: "alert-7",
    severity: "info",
    title: "Weather Update",
    message: "Incoming rainfall detected in 2 hours",
    beehiveName: "Beta Hive",
    farmName: "Ising Farm",
    timestamp: "5 minutes ago",
    timestampMs: now - 5 * 60 * 1000, // 5 minutes ago
    read: false
  },
  {
    id: "alert-8",
    severity: "info",
    title: "Honey Harvested",
    message: "Successfully harvested 15.5kg of honey from Alpha Hive",
    beehiveName: "Alpha Hive",
    farmName: "Ising Farm",
    timestamp: "10 minutes ago",
    timestampMs: now - 10 * 60 * 1000, // 10 minutes ago
    read: false
  },
];

// Function to generate random defense system alerts for predators
export const generateRandomAlert = (): Alert | null => {
  const now = Date.now();
  const random = Math.random();
  
  // 30% chance to generate an alert
  if (random > 0.3) return null;
  
  const alertTypes = [
    {
      severity: "critical" as const,
      title: "Predator Detected - Bird",
      getMessage: (hive: string) => `Defense sensor detected a bird near ${hive}. MEMS Acoustic Monitor registered unusual vibration patterns.`,
      beehives: ["Alpha Hive", "Beta Hive", "Gamma Hive", "Delta Hive", "Zeta Hive"],
      farms: ["Ising Farm", "Alveare Farm", "BoJayHan Farm"],
    },
    {
      severity: "critical" as const,
      title: "Predator Detected - Lizard",
      getMessage: (hive: string) => `Defense sensor detected a lizard approaching ${hive}. TGS2600 Chemical Sensor picked up foreign pheromones.`,
      beehives: ["Alpha Hive", "Beta Hive", "Gamma Hive", "Delta Hive", "Zeta Hive"],
      farms: ["Ising Farm", "Alveare Farm", "BoJayHan Farm"],
    },
    {
      severity: "warning" as const,
      title: "Unusual Activity Detected",
      getMessage: (hive: string) => `Defense system detected unusual vibration patterns near ${hive}. Possible predator in vicinity.`,
      beehives: ["Alpha Hive", "Beta Hive", "Gamma Hive", "Delta Hive", "Zeta Hive"],
      farms: ["Ising Farm", "Alveare Farm", "BoJayHan Farm"],
    },
    {
      severity: "warning" as const,
      title: "High Temperature Detected",
      getMessage: () => "Temperature exceeds normal range",
      beehives: ["Alpha Hive", "Beta Hive", "Gamma Hive", "Delta Hive", "Zeta Hive"],
      farms: ["Ising Farm", "Alveare Farm", "BoJayHan Farm"],
    },
    {
      severity: "warning" as const,
      title: "Elevated VOC Levels",
      getMessage: () => "Volatile organic compounds above threshold",
      beehives: ["Alpha Hive", "Beta Hive", "Gamma Hive", "Delta Hive", "Zeta Hive"],
      farms: ["Ising Farm", "Alveare Farm", "BoJayHan Farm"],
    },
    {
      severity: "info" as const,
      title: "Bee Activity Spike",
      getMessage: (hive: string) => `${hive} showing increased foraging activity`,
      beehives: ["Alpha Hive", "Beta Hive", "Gamma Hive", "Delta Hive", "Zeta Hive"],
      farms: ["Ising Farm", "Alveare Farm", "BoJayHan Farm"],
    },
  ];
  
  const alertType = alertTypes[Math.floor(Math.random() * alertTypes.length)];
  const beehiveIndex = Math.floor(Math.random() * alertType.beehives.length);
  const beehiveName = alertType.beehives[beehiveIndex];
  const farmName = alertType.farms[beehiveIndex % alertType.farms.length];
  
  return {
    id: `alert-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,
    severity: alertType.severity,
    title: alertType.title,
    message: alertType.getMessage(beehiveName),
    beehiveName,
    farmName,
    timestamp: "just now",
    timestampMs: now,
    read: false
  };
};